#---- begin snakebids boilerplate ----------------------------------------------

import snakebids
from snakebids import bids
# from niworkflows.interface.surf import GiftiToCSV, CSVToGifti
from os.path import join

configfile: 'config/snakebids.yml'

#writes inputs_config.yml and updates config dict
config.update(
    snakebids.generate_inputs(
        bids_dir=config["bids_dir"],
        pybids_inputs=config["pybids_inputs"],
        derivatives=config["derivatives"],
        participant_label=config["participant_label"],
        exclude_participant_label=config["exclude_participant_label"]
    )
)



#this adds constraints to the bids naming
wildcard_constraints:  **snakebids.get_wildcard_constraints(\
    config["pybids_inputs"]\
)

#---- end snakebids boilerplate ------------------------------------------------

rule all:
    input: 
        # expand('deriv/post_fmriprep/sub-avg/surface_maps/sub-avg_hemi-{hemi}_space-MNI_den-{density}_gradients.func.gii',hemi=['L','R'],density=['2k','7k']),
        expand('deriv/post_hippunfold/sub-avg/surf_MNI/sub-avg_hemi-{hemi}_space-MNI_den-{density}_desc-nancorrect_midthickness.surf.gii',hemi=['L','R'],density=['2k','7k']),

include: 'rules/post_hippunfold.smk'

# include: 'rules/post_hcp.smk'
